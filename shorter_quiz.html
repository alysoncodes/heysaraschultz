
<div id="quizContainer">
<div id="open">

        
</div>
    
<div id="buttonContainer">
  <button type="button" id="startBtn" >Take the Quiz</button> 
</div>  
       
      <div id="divResults">

        

      </div>
<div id="buttonContainer2">
      <button type="button" id="prev"> < Previous </button> 
      <button type="button" id="next">Next > </button> 
</div>
<script>    
        const quiz = {
        0: {
            "number": "Question 1 of 5",
            "question": "Have you felt a shift in your passion or the direction of your business, leading to and/or dreaming up new services or products?",
            "image": "",
            "answers": [
                { "ans": "Yes",
                "val": 1 },
                { "ans": "No",
                "val": 2 }
                ]
            },
        1: {
           "number": "Question 2 of 5",
            "question": "Are you noticing a change in the kind of clients or customers you connect with most? Maybe you aren't vibing with your current clients or just getting clear on who your dreamy client is.",
            "image": "",
            "answers": [
                { "ans": "Yes",
                "val": 1 },
                { "ans": "No",
                "val": 2 }
                ]
            },
        2: {
            "number": "Question 3 of 5",
            "question": "Does it feel like your industry is evolving, or are you sensing shifts in the market that you need to adapt to?",
            "image": "",
            "answers": [
                { "ans": "Yes",
                "val": 1 },
                { "ans": "No",
                "val": 2 }
                ]
        },
        3: {
            "number": "Question 4 of 5",
            "question": "Does your current visual identity (colors, logos, fonts) still resonate with the energy and vibe of your brand, or is it starting to feel a bit outdated, dull, uninspiring?",
            "image": "",
            "answers": [
                { "ans": "Yes",
                "val": 1 },
                { "ans": "No",
                "val": 2 }
                ]
        },
        4: {
           "number": "Question 5 of 5",
            "question": "Have you recently adjusted your pricing or are you repositioning you ad your business in its industry?",
            "image": "",
            "answers": [
                { "ans": "Yes",
                "val": 1 },
                { "ans": "No",
                "val": 2 }
                ]
        }

    
        };

    //redirect object
    const redirects = {
        1: "view.flodesk.com/pages/62f51bf3e5ea6b3d8aea4d3f",
        2: "view.flodesk.com/pages/61293439876c79b782e683b2",
        3: "view.flodesk.com/pages/62f51be5e5ea6b3d8aea4d3e",
        4: "view.flodesk.com/pages/62f14b0a85187de9a5503b6a"
    };


    //answers array
    answers = [];

    //counter var
    counter = 0;



    //"opening" slide

    $("#divResults").hide();
    $("#next").hide();
    $("#prev").hide();

    $("#open").append("<h3 id='openingSlide'>Start the quiz <em>now</em></h3>\
                      <p id='openingP'>Something catchy here about the quiz and how it \
                      relates to the celebs and your brand style. Ut enim ad minim veniam, \
                      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo \
                      consequat. Duis aute irure dolor in reprehenderit.</p>");

    //img append
    //$("#open").append("<img src='https://images.squarespace-cdn.com/content/v1/60e8722fc6bcfa0427869b69/1660318951639-E441CWZ01HVBRLQTKEFN/Lover3.png?format=500w'>");


    $("#startBtn").click(function() {

        $("#open").remove();
        $("#startBtn").remove();

        $("#divResults").show();
        $("#next").show();


        //Testing Info
        //$("#divResults").append("<p>Counter: " + counter + "</p><p>Answers Array: " + answers + "</p></br>");

        //progress number append
        $("#divResults").append("<h4>" + quiz[0].number + "</h4>");

         //q append
        $("#divResults").append("<h2>" + quiz[0].question + "</h2>");

        //img append
        //$("#divResults").append("<img src='" + quiz[0].image + "'>");
        //console.log(quiz[0].image);

      

        

        //a append
        $("#divResults").append(
            //console.log(quiz[0].answers);
            $.each(quiz[0].answers, function(name, value) {
                //console.log(this.ans);

            $("#divResults").append("<input type='radio' id='" + this.val + "' name='question' value='" + this.val + "'>");

            $("#divResults").append("<label for='" + this.val + "'>" + this.ans + "</label></br>");

            })

        );


           //button disable 
           $('button').prop("disabled", true);
            
           $('input[type="radio"]').on("click", function() {
               //console.log(('input[type="radio"]:checked').length)
             if($('input[type="radio"]:checked').length){
               $('button').prop("disabled", false);
             }
           }); 




    }); //end startBtn


           
    $("#next").click(function() {


        if (counter < 7) {
            console.log('main qs');

            $("#divResults").show();
            $("#prev").show();
    
    
            //new adding to array!
            value = parseInt($("input[name='question']:checked").val());
            console.log(value);
            console.log(answers);
            answers[counter] = value;
            counter += 1;

    
            //empty
            $("#divResults").empty();
    
    
            //Testing Info
            //$("#divResults").append("<p>Counter: " + counter + "</p><p>Answers Array: " + answers + "</p></br>");
    
             //progress number append
            $("#divResults").append("<h4>" + quiz[counter].number + "</h4>");
          
             //q append
            $("#divResults").append("<h2>" + quiz[counter].question + "</h2>");

            //img append
            //$("#divResults").append("<img src='" + quiz[counter].image + "'>");
            //console.log(quiz[counter].image);
    
            //a append
            $("#divResults").append(
                //console.log(quiz[0].answers);
                $.each(quiz[counter].answers, function(name, value) {
                    //console.log(this.ans);
    
                $("#divResults").append("<input type='radio' id='" + this.val + "' name='question' value='" + this.val + "'>");
    
                $("#divResults").append("<label for='" + this.val + "'>" + this.ans + "</label></br>");
    
                }) //for each end
    
                
    
            ); //a append end

            restorePreviousAnswer();
            

        } else if (counter == 7) {
            //console.log('next to last question');

            

            $("#divResults").show();
            $("#prev").show();
            $("#next").html("Submit Answers");
    
    
            //new adding to array!
            value = parseInt($("input[name='question']:checked").val());
            console.log(value);
            console.log(answers);
            answers[counter] = value;
            console.log(answers);
            counter += 1;

    
            //empty
            $("#divResults").empty();
    
    
            //Testing Info
            //$("#divResults").append("<p>Counter: " + counter + "</p><p>Answers Array: " + answers + "</p></br>");


          //progress number append
            $("#divResults").append("<h4>" + quiz[counter].number + "</h4>");
    
             //q append
            $("#divResults").append("<h2>" + quiz[counter].question + "</h2>");

            //img append
            //$("#divResults").append("<img src='" + quiz[counter].image + "'>");
            //console.log(quiz[counter].image);
    
            //a append
            $("#divResults").append(
                //console.log(quiz[0].answers);
                $.each(quiz[counter].answers, function(name, value) {
                    //console.log(this.ans);
    
                $("#divResults").append("<input type='radio' id='" + this.val + "' name='question' value='" + this.val + "'>");
    
                $("#divResults").append("<label for='" + this.val + "'>" + this.ans + "</label></br>");
    
                }) //for each end
    
                
    
            ); //a append end

            


        } else {
            //console.log('quiz finished!');
            //console.log(answers.length);

            //new adding to array!
            value = parseInt($("input[name='question']:checked").val());
            //value = $("input[name='question']:checked").val();
            console.log(value);
            console.log(answers);
            answers[counter] = value;
            counter += 1;



            //Testing Info
            //$("#divResults").append("<p>Counter: " + counter + "</p><p>Answers Array: " + answers + "</p></br>");

           
            //redirects function
            maxKey = redirect();

            //window redirect
            window.location.href = '//' + redirects[maxKey];

            //redirect testing
            //console.log(redirects[maxKey]);
           

        
        }; //end elseif

       
        //button disabled without radio click
        $('#next').prop("disabled", true);

        $('input[type="radio"]').on("click", function() {
            //console.log(('input[type="radio"]:checked').length)
          if($('input[type="radio"]:checked').length){
            $('#next').prop("disabled", false);
          }
        }); 

        //enable next button
        if (restorePreviousAnswer()) {
            console.log('working! yay!');
            $('#next').prop("disabled", false);  
        }; 


    }); //next






    $("#prev").click(function() {
        //console.log("prev clicked");


        //empty
        $("#divResults").empty();



        //next btn text
        $("#next").html("Next Question");


        //decrement counter
        counter -= 1;
        //console.log(counter);
        //console.log(answers);


        //Testing Info
        //$("#divResults").append("<p>Counter: " + counter + "</p><p>Answers Array: " + answers + "</p></br>");

        //progress number append
            $("#divResults").append("<h4>" + quiz[counter].number + "</h4>");
      
        //q append
        $("#divResults").append("<h2>" + quiz[counter].question + "</h2>");

        //img append
        //$("#divResults").append("<img src='" + quiz[counter].image + "'>");
        //console.log(quiz[counter].image);

        //a append
        $("#divResults").append(
            //console.log(quiz[0].answers);
            $.each(quiz[counter].answers, function(name, value) {
                //console.log(this.ans);

            $("#divResults").append("<input type='radio' id='" + this.ans + "' name='question' value='" + this.val + "'>");

            $("#divResults").append("<label for='" + this.ans + "'>" + this.ans + "</label></br>");

            })

        );


        restorePreviousAnswer();

        //enable next button
        if (restorePreviousAnswer()) {
            console.log('working! yay!');
            $('#next').prop("disabled", false);  
        }; 


    }); //prev
        

        




//FUNCTIONS
/*----------------------------------------------------------
Name:	restorePreviousAnswer
Desc:	onclick previous button, check matching radio button
Para:	
Retn:	"checked" radio, true
------------------------------------------------------------*/
var restorePreviousAnswer = function () {

if (answers[counter] != null) {

    $("input[name=question][value=" + answers[counter] + "]").prop("checked", true);
    console.log('restored!');

    return true;

};

};

/*----------------------------------------------------------
Name:	redirect
Desc:	process answers array until redirect value is found
Para:	
Retn:	maxKey
------------------------------------------------------------*/

var redirect = function() {


    //count the dupes, return as object
    const count = answers.reduce((accumulator, value) => {

        return {...accumulator, [value]: (accumulator[value] || 0) + 1};

    }, {});

    console.log(count);
          
    //find values from object and return as array
    const values = Object.values(count);
    console.log(values);

    //find the highest number in the previous array
    const max = Math.max(...values);
    console.log(max);

          
    console.log(Object.keys(count)); 

    //get object key using max value
    function getObjKey(count, value) {

        return Object.keys(count).find(key => count[key] === value);

    };

    console.log(getObjKey(count, max));


    var maxKey = getObjKey(count, max);


        return maxKey;
}; 
</script>

